# recipe_ecs.yml
---
documentation:

  description: |
    Calculate ECS using linear regression following Andrews et al. (2012).

  authors:
    - schlund_manuel

  references:
    - andrews12grl

  projects:
    - crescendo


preprocessors:

  spatial_mean:
    area_statistics:
      operator: mean


diagnostics:

  cmip6:
    description: Calculate ECS for all available CMIP6 models.
    variables:
      tas: &variable_settings
        preprocessor: spatial_mean
        project: CMIP6
        activity: CMIP
        mip: Amon
      rtnt:
        <<: *variable_settings
        derive: true
    additional_datasets:
      - {dataset: CNRM-CM6-1, institute: CNRM-CERFACS, exp: piControl,    ensemble: r1i1p1f2, grid: gr, start_year: 1850, end_year: 1999}
      - {dataset: CNRM-CM6-1, institute: CNRM-CERFACS, exp: abrupt-4xCO2, ensemble: r1i1p1f2, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: CNRM-ESM2-1, institute: CNRM-CERFACS, exp: piControl,    ensemble: r1i1p1f1, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: CNRM-ESM2-1, institute: CNRM-CERFACS, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gr, start_year: 1850, end_year: 1999}
      - {dataset: CNRM-ESM2-1, institute: CNRM-CERFACS, exp: piControl,    ensemble: r1i1p1f2, grid: gr, start_year: 1850, end_year: 1999}
      - {dataset: CNRM-ESM2-1, institute: CNRM-CERFACS, exp: abrupt-4xCO2, ensemble: r1i1p1f2, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: MIROC6, institute: MIROC, exp: piControl,    ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: MIROC6, institute: MIROC, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      - {dataset: BCC-ESM1, institute: BCC, exp: piControl,    ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      - {dataset: BCC-ESM1, institute: BCC, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      - {dataset: BCC-CSM2-MR, institute: BCC, exp: piControl,    ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      - {dataset: BCC-CSM2-MR, institute: BCC, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: IPSL-CM6A-LR, institute: IPSL, exp: piControl,    ensemble: r1i1p1f1, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: IPSL-CM6A-LR, institute: IPSL, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: IPSL-CM6A-LR, institute: IPSL, exp: piControl,    ensemble: r1i2p1f1, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: IPSL-CM6A-LR, institute: IPSL, exp: abrupt-4xCO2, ensemble: r1i2p1f1, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: GISS-E2-1-G, institute: NASA-GISS, exp: piControl,    ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: GISS-E2-1-G, institute: NASA-GISS, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: GISS-E2-1-G, institute: NASA-GISS, exp: piControl,    ensemble: r102i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: GISS-E2-1-G, institute: NASA-GISS, exp: abrupt-4xCO2, ensemble: r102i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: GISS-E2-1-H, institute: NASA-GISS, exp: piControl,    ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: GISS-E2-1-H, institute: NASA-GISS, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      - {dataset: MRI-ESM2-0, institute: MRI, exp: piControl,    ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      - {dataset: MRI-ESM2-0, institute: MRI, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: GFDL-CM4, institute: NOAA-GFDL, exp: piControl,    ensemble: r1i1p1f1, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: GFDL-CM4, institute: NOAA-GFDL, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: GFDL-ESM4, institute: NOAA-GFDL, exp: piControl,    ensemble: r1i1p1f1, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: GFDL-ESM4, institute: NOAA-GFDL, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: CESM2, institute: NCAR, exp: piControl,    ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: CESM2, institute: NCAR, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: CESM2-WACCM, institute: NCAR, exp: piControl,    ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: CESM2-WACCM, institute: NCAR, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: CanESM5, institute: CCCma, exp: piControl,    ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: CanESM5, institute: CCCma, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      - {dataset: EC-Earth3-Veg, institute: EC-Earth-Consortium, exp: piControl,    ensemble: r1i1p1f1, grid: gr, start_year: 1850, end_year: 1999}
      - {dataset: EC-Earth3-Veg, institute: EC-Earth-Consortium, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gr, start_year: 1850, end_year: 1999}
      # - {dataset: UKESM1-0-LL, institute: MOHC, exp: piControl,    ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: UKESM1-0-LL, institute: MOHC, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: UKESM1-0-LL, institute: MOHC, exp: piControl,    ensemble: r1i1p1f2, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: UKESM1-0-LL, institute: MOHC, exp: abrupt-4xCO2, ensemble: r1i1p1f2, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: SAM0-UNICON, institute: SNU, exp: piControl,    ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}
      # - {dataset: SAM0-UNICON, institute: SNU, exp: abrupt-4xCO2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1999}

    scripts:
      ecs: &ecs_script
        script: climate_metrics/ecs.py
